{% extends "dashboard_base_template.html" %} {% block content %}
<div class="container mt-4 text-center" style="margin-left: 15%; width: 85%;">
    <div class="my-5 text-secondary" style="font-size: 8vh; font-weight: bold;">
        Edit Post
    </div>
    <div class="col" style="margin: 0 auto;">
        <div class="row my-3">
            <div class="btn-group btn-group-toggle" style="margin-left: 27.5%;" data-toggle="buttons">
                <h4 class="text-secondary"><b>Type: </b></h4>
                <label class="ml-2 btn btn-outline-secondary active">
                    {% if post_type=='Ard' %}
                    
                    <input type="radio" onclick="typeChecked()"  checked name="options" id="type_ard" />Arduino project
                    {% else %}
                    <input type="radio" onclick="typeChecked()"  name="options" id="type_ard" />Arduino project
                    {% endif %}
        </label>
                <label class="btn btn-outline-secondary">
                    {% if post_type=="Basic" %}
                    
                    <input type="radio" onclick="typeChecked()" checked  name="options" id="type_basic" /> Basic Electronic project
                    {% else %}
                    <input type="radio" onclick="typeChecked()"   name="options" id="type_basic" /> Basic Electronic project
                    {% endif %}
        </label>
                <label class="btn btn-outline-secondary active">
                    {% if post_type=="Iot" %}
                    
                    <input type="radio" onclick="typeChecked()" checked  name="options" id="type_iot" />Iot project
                    {% else %}
                    <input type="radio" onclick="typeChecked()" name="options" id="type_iot" />Iot project
                    {% endif %}
        </label>
                <label class="btn btn-outline-secondary">
                    {% if post_type=='Other' %}
          <input type="radio"  onclick="typeChecked()" checked name="options" id="type_other" /> Other
          {% else%}
          <input type="radio"  onclick="typeChecked()"  name="options" id="type_other" /> Other
                    {% endif %}
          <input type="radio"  onclick="typeChecked()" name="options" id="type_other" /> Other
        </label>
            </div>
        </div>
        <div class="row my-3">
            <div class="btn-group btn-group-toggle" style="margin-left: 26%;" data-toggle="buttons">
                <h4 class="text-secondary"><b>Intend: </b></h4>
                <label class="ml-2 btn btn-outline-secondary active">
                    {% if intend=='Info' %}
                    
                    <input type="radio" checked  onclick="intendChecked()" name="options" id="intend_info" />Informational
                    {% else %}
                    <input type="radio" onclick="intendChecked()" name="options" id="intend_info" />Informational
                    
                    {% endif %}
        </label>
                <label class="btn btn-outline-secondary">
                    {% if intend=='Tuto' %}
                    
                    <input type="radio" checked onclick="intendChecked()" name="options" id="intend_tuto" /> Tutorial
                    {% else %}
                    
                    <input type="radio" onclick="intendChecked()" name="options" id="intend_tuto" /> Tutorial
                    {% endif %}
        </label>
            </div>
        </div>
        <!-- <div class="row" style="margin-left: 26%;"> -->
        <button id="typeS" style="width: 50%; margin-left:33.5%;" onclick="submitCreatePost('type')" class=" mb-5 btn btn-outline-secondary btn-block btn-sm">Submit</button>
        <!-- </div> -->
    </div>
    <img width="50%" src="/static/images/{{thumbnail}}" id="test" alt="Cover image not uploaded" />
    <!-- !-----------File upload -->
    <div class="input-group my-3" style="width: 50%; margin: 0 auto;">
        <div class="input-group-prepend">
            <span class="input-group-text" id="cover_image_uploaderLabel">Upload Image</span
      >
    </div>
    <div class="custom-file">
      <input
        type="file"
        class="custom-file-input"
        id="cover_image_uploader"
        aria-describedby="inputGroupFileAddon01"
        value=/static/images/"{{thumbnail}}"
        
      />
      <label class="custom-file-label" for="cover_image_uploader"
        >Choose file</label
      >
    </div>
  </div>
  <button class="mt-1 btn btn-secondary btn-sm" id="coverS" onclick="uploadImg('cover','0')">upload</button>
  <!-- !--------------------keyword-------------- -->

  
  <div class="form-group my-5">
    <label class="text-secondary" for="description"><b>keyword</b></label>
    <textarea
     placeholder="This keyword is used to suggest related posts"
    
      class="form-control"
      style="width: 50%; margin: 0 auto; border-width: 5px;"
      id="keyword"
      rows="1"
      onblur="submitCreatePost('keyword')"
    >{{keyword}}</textarea>
   
  <!-- !-------------Heading -->

  <div class="form-group my-5">
    <label class="text-secondary" for="description"><b>Heading</b></label>
    <textarea
      id="heading"
      class="form-control"
      style="width: 50%; margin: 0 auto; border-width: 5px;"
      value='{{heading}}'
      rows="1"
      onblur="submitCreatePost('heading')"
    >{{heading}}</textarea>
    
  </div>
  <!-- !---------Description -->
  <div class="form-group">
    <label class="text-secondary" for="description"><b>Description</b></label>
    <textarea
      class="form-control"
      style="width: 50%; margin: 0 auto; border-width: 5px;"
      id="description"
      rows="3"
      onblur="submitCreatePost('description')"
    >{{description}}</textarea>
   
  </div>
  <!-- !-----------Quick questions -->
  <div class="text-secondary mt-5" style="font-size: 6vh; font-weight: bold;">
    Quick questions
  </div>
  <div class="form-group mt-2" id="conta_quick_answers">
    
    {% for QA in quickAnswers %}
    <div id="quickAnswers{{loop.index}}">
      
      <label class="text-secondary" for="description"><b>Question</b></label>
      <textarea
      id="quick_question{{loop.index}}"
      class="form-control"
      style="width: 50%; margin: 0 auto; border-width: 5px;"
      id="description"
      onblur="backup('quick_question','{{loop.index}}')"
      rows="1"
      >{{quickQuestions[loop.index0]}}</textarea>
      <label class="text-secondary mt-3" for="description"><b>Answer</b></label>
      <textarea
      id="quick_answer{{loop.index}}"
      class="form-control"
      style="width: 50%; margin: 0 auto; border-width: 5px;"
      id="description"
      onblur="backup('quick_answer','{{loop.index}}')"
      rows="2"
      >{{quickAnswers[loop.index0]}}</textarea>
      
      <button onclick="deleteThis('quickAnswers','{{loop.index}}','{{quickAnswersDb[loop.index0].id}}','{{post_type}}')" class="btn btn-sm btn-outline-secondary">delete</button>
    </div>

    {% endfor %}
  </div>
  <button onclick="deletePrev('quickAnswers')" id="quickAnswersDelete" class="mb-3 btn btn-danger btn-sm" style="display: none;">-</button>
    <button id="quickAnswersS" onclick="submitCreatePost('quickAnswers')" class="mb-3 btn btn-secondary btn-sm">Submit</button>
    <button onclick="addNew('quickAnswers')" class="mb-3 btn btn-dark btn-sm">+</button>
  <!-- ! ------------------Index------>
  <div class="form-group" id="conta_index">
    <div class="text-secondary" style="font-size: 6vh; font-weight: bold;">
      Index
    </div>
{% if index %}

{% for ind in index %}
    
<div class="input-group mb-2 mr-sm-2" id="indexDiv{{loop.index}}" style="width: 50%; margin-left: 26%;">
  <div class="input-group-prepend">
    <div class="input-group-text">{{loop.index}}</div>
  </div>
  <input
  type="text"
  id="index{{loop.index}}"
  onblur="backup('index','{{loop.index}}')"
  class="form-control"
  id="inlineFormInputGroupUsername2"
  placeholder="Heading"
  value="{{ind}}" />
  <button onclick="deleteThis('index','{{loop.index}}','{{indexDb[loop.index0].id}}','{{post_type}}')" class="btn btn-sm btn-outline-secondary">delete</button>

  </div>
  {% endfor %}
{% else %}

<div class="input-group mb-2 mr-sm-2" id="indexDiv1" style="width: 50%; margin-left: 26%;">
  <div class="input-group-prepend">
    <div class="input-group-text">1</div>
  </div>
  <input
  type="text"
  id="index1"
  onblur="backup('index','1')"
  class="form-control"
  id="inlineFormInputGroupUsername2"
  placeholder="Heading"
   />
  </div>

{% endif %}    
  </div>
   <button onclick="deletePrev('index')" id="indexDelete" class="mb-3 btn btn-danger btn-sm" style="display: none;">-</button>
   <button id="indexS" onclick="submitCreatePost('index')" class="mb-3 btn btn-secondary btn-sm">Submit</button>
   <button onclick="addNew('index')" class="mb-3 btn btn-dark btn-sm">+</button>
<!-- !-------paragraph -->
  <div class="form-group mt-5" id="contaPara">
    {% if para_subheading or para or para_thumbnail %}
    
    <div class=" text-secondary" style="font-size: 6vh;font-weight:bold">Paragraphs/Steps</div>
    {% for ind in para_subheading %}
    
    <div id="paraDiv{{loop.index}}">
      
      <label class="text-secondary mt-2" for="para_heading{{loop.index}}"><b>Subheading</b></label>
      
      <textarea class="form-control" onblur="backup('para_heading','{{loop.index}}')" style="width: 50%; margin:0 auto;border-width:5px;" id="para_heading{{loop.index}}" rows="1">{{para_subheading[loop.index0]}}
        
      </textarea>
      <label class="text-secondary mt-3 " for="para{{loop.index}}"><b>Para</b></label>
      <textarea class="form-control" onblur="backup('para', '{{loop.index}}')" style="width: 50%; margin:0 auto;border-width:5px;" id="para{{loop.index}}" rows="4">{{para[loop.index0]}}</textarea>
      <button style="width: 50%; margin-left:25%;" onclick="deleteThis('para','{{loop.index}}','{{paraDb[loop.index0].id}}','{{post_type}}')" class="mt-2 btn btn-sm btn-secondary btn-block">delete</button>
      <!-- *---upload image -->
      {% if para_thumbnail[loop.index0] %}
      
      <img class="mt-3" src="/static/images/{{para_thumbnail[loop.index0]}}" id="paraImg{{loop.index}}"   width="40%" alt="upload image">
      {% else %}
      <img class="mt-3" id="paraImg{{loop.index}}"   width="40%" alt="upload image">
      {% endif %}
      <h5 class="text-secondary mt-1">Preview</h5>
      <div class="input-group my-3" style="width: 50%; margin: 0 auto;">
        
        
        <input type="file" class="form-control-file" id="paraImgUploader{{loop.index}}">
        <button class="mt-1 btn btn-secondary btn-sm"  onclick="uploadImg('para','{{loop.index}}')">upload</button>
      
       
      </div>
      
    </div>
    {% endfor %}
    {% else %}
    <div class=" text-secondary" style="font-size: 6vh;font-weight:bold">Paragraphs/Steps</div>
    <div id="paraDiv1">
      
      <label class="text-secondary mt-2" for="para_heading1"><b>Subheading</b></label>
      <textarea class="form-control" onblur="backup('para_heading','1')" style="width: 50%; margin:0 auto;border-width:5px;" id="para_heading1" rows="1"></textarea>
      <label class="text-secondary mt-3 " for="para1"><b>Para</b></label>
      <textarea class="form-control" onblur="backup('para', '1')" style="width: 50%; margin:0 auto;border-width:5px;" id="para1" rows="4"></textarea>
      <!-- *---upload image -->
   
      <img class="mt-3" id="paraImg1"   width="40%" alt="upload image">
      
      <h5 class="text-secondary mt-1">Preview</h5>
      <div class="input-group my-3" style="width: 50%; margin: 0 auto;">
        
        
        <input type="file" class="form-control-file" id="paraImgUploader1">
        <button class="mt-1 btn btn-secondary btn-sm"  onclick="uploadImg('para','1')">upload</button>
      </div>
      
    </div>
    {% endif %}
  </div>
<button onclick="deletePrev('para')" id="paraDelete" class="mb-3 btn btn-danger btn-sm" style="display: none;">-</button>
   <button id="paraS" onclick="submitCreatePost('para')" class="mb-3 btn btn-secondary btn-sm">Submit</button>
   <button onclick="addNew('para')" class="mb-3 btn btn-dark btn-sm">+</button>
<!-- !------------------Table--------------- -->
  <div id="tableDiv">
{% if col1 or col2 %}
<table class="table table-bordered" id="tableMain">
  <thead>
      <tr id="head">
          <th scope="col">Sno</th>
          <th scope="col"><input id="heading1" class="form-control" type="text" placeholder="   Heading1" name="" value="{{tableHeading1}}"></th>
          <th scope="col"><input id="heading2" class="form-control" type="text" placeholder="   Heading2" name="" value="{{tableHeading2}}"></th>

      </tr>
  </thead>
  <tbody id="tableContent">
    {% if col1>col2 %}
    {% set count =col1  %}
    
    {% else %}
    {% set count =col2  %}
    
    {% endif %}
        {% for ind in count %}
    <tr>
      <th scope="row">{{loop.index}}</th>
      <td><input id="row{{loop.index}}_1" class="form-control" type="text" name="" value="{{col1[loop.index0]}}"></td>
      <td><input id="row{{loop.index}}_2" class="form-control" type="text" name="" value="{{col2[loop.index0]}}"></td>
      
    </tr>
    
    {% endfor %}

   
    </tbody>
  </table>
  <button  id="tableS" onclick="submitCreatePost('table')" class="mb-3 btn btn-secondary btn-sm">make changes</button>
</div>
<button onclick="deleteThis('table','{{loop.index}}','{{tableDb[loop.index0].id}}','{{post_type}}')" class="btn btn-sm btn-outline-secondary"> delete table </button>
<button style="width: 50%; margin-left:25%;" onclick="deleteThis('table','{{loop.index}}','{{tableDb[loop.index0].id}}','{{post_type}}')" class="mt-2 btn btn-sm btn-secondary btn-block">new table</button>
<!-- <button  id="newtableS" onclick="newTable()" class="mb-3 btn btn-secondary btn-sm">New Table</button> -->
{% else %}


<textarea

class="form-control"
placeholder="No of Rows"
style="width: 50%; margin: 0 auto; border-width: 5px;"
id="rowNo"
rows="1"
></textarea>
<button id="enter"  onclick="enterTableRows()" class="my-3 btn btn-secondary btn-sm ">Enter</button>

<table class="table table-bordered" id="tableMain" style="display: none;">
  <thead>
      <tr id="head">
          <th scope="col">Sno</th>
          <th scope="col"><input id="heading1" class="form-control" type="text" placeholder="   Heading1" name="" value=""></th>
          <th scope="col"><input id="heading2" class="form-control" type="text" placeholder="   Heading2" name="" value=""></th>

      </tr>
  </thead>
  <tbody id="tableContent">
      <tr>
          <th scope="row">1</th>
          <td><input id="row1_1" class="form-control" type="text" name="" value=""></td>
          <td><input id="row1_2" class="form-control" type="text" name="" value=""></td>

      </tr>
     

   
    </tbody>
  </table>
{% endif %}
  <button  style="display: none;" id="tableS" onclick="submitCreatePost('table')" class="mb-3 btn btn-secondary btn-sm">Submit</button>
</div>
<!-- ! Coclusion -->
<div class="form-group mt-5">
  <div class=" text-secondary" style="font-size: 6vh;font-weight:bold">Conclusion</div>
  
  <textarea
    class="form-control"
    style="width: 50%; margin: 0 auto; border-width: 5px;"
    id="conclusion"
    rows="3"
    onblur="submitCreatePost('conclusion')"
  >{{conclusion}}</textarea>

</div>
<!-- !-----------------FAQ  -->
<div class="form-group mt-5" id="contaFaq"> 
  <div class="text-secondary" style="font-size: 6vh; font-weight: bold;">
  FAQ
  </div>
  {% if faq_ or faq_ans %}
  
  {% for ind in faq_q %}
      
  <div id="faq{{loop.index}}">
    
    <label class="text-secondary mt-2" for="description"><b>Question</b></label>
    <textarea
    id="faq_q{{loop.index}}"
    class="form-control"
    style="width: 50%; margin: 0 auto; border-width: 5px;"
    id="description"
    rows="1"
    onblur="backup('faq_q','{{loop.index}}')"
    >{{faq_q[loop.index0]}}</textarea>
    <label class="text-secondary mt-3" for="description"><b>Answer</b></label>
    <textarea
    id="faq_ans{{loop.index}}"
    class="form-control"
    style="width: 50%; margin: 0 auto; border-width: 5px;"
    id="description"
    onblur="backup('faq_ans','{{loop.index}}')"
    rows="2"
    >{{faq_ans[loop.index0]}}</textarea>
    <button style="width: 50%; margin-left:25%;" onclick="deleteThis('faq','{{loop.index}}','{{faqDb[loop.index0].id}}','{{post_type}}')" class="mt-2 btn btn-sm btn-secondary btn-block">delete</button>
    
  </div>
  {% endfor %}
  {% else %}
  <div id="faq1">
    
    <label class="text-secondary mt-2" for="description"><b>Question</b></label>
    <textarea
    id="faq_q1"
    class="form-control"
    style="width: 50%; margin: 0 auto; border-width: 5px;"
    id="description"
    rows="1"
    onblur="backup('faq_q','1')"
    ></textarea>
    <label class="text-secondary mt-3" for="description"><b>Answer</b></label>
    <textarea
    id="faq_ans1"
    class="form-control"
    style="width: 50%; margin: 0 auto; border-width: 5px;"
    id="description"
    onblur="backup('faq_ans','1')"
    rows="2"
    ></textarea>
    
    
  </div>
  {% endif %}
</div>
  <button onclick="deletePrev('faq')" id="faqDelete" class="mb-3 btn btn-danger btn-sm" style="display: none;">-</button>
  <button onclick="submitCreatePost('faq')" id="faqS" class="mb-3 btn btn-secondary btn-sm">Submit</button>
  <button onclick="addNew('faq')" class="mb-3 btn btn-dark btn-sm">+</button>
  <form action="/save_edited/{{type}}/{{id}}" method="post">
    
    <button id="publishBtn" type="submit" class="btn btn-outline-dark btn-block mt-5 btn-lg"  style="width: 60%; margin-left:20%;">Save changes</button>

  </form>
 
 

</div>
<!-- * Test button below uncomment to use it -->
<!--? <button onclick="testG()">Test</button> -->
</div>

{% endblock %}
{% block script %}
<script>
  $('#cover_image_uploader ').on('change',function(){
      //get the file name
      var fileName = $(this).val();
      //replace the "Choose a file" label
      $(this).next('.custom-file-label').html(fileName);
  })
</script>
<script>
var data = '{{countQuickAnswers|safe}}'
var dataCount=JSON.parse(data)
countQuickAnswers=dataCount
if(countQuickAnswers==0){
  countQuickAnswers++
}

data = '{{countIndex|safe}}'
dataCount=JSON.parse(data)
countIndex=dataCount
if(countIndex==0){
  countIndex++
}

data = '{{countFaq_ans|safe}}'
dataCount=JSON.parse(data)
countFaq=dataCount
if(countFaq==0){
  countFaq++
}

data = '{{countPara|safe}}'
dataCount=JSON.parse(data)
countPara=dataCount
if(countPara==0){
  countPara++
}
data = '{{totalType|safe}}'
dataCount=JSON.parse(data)
totalType=dataCount

dataX = '{{countCol1|safe}}'
dataCountCol1=JSON.parse(dataX)
dataY = '{{countCol2|safe}}'
dataCountCol2=JSON.parse(dataX)
if (dataX>dataY){
  dataCount=dataX
}
else{
  dataCount=dataY
}

tableRow=dataCount
 
document.getElementById('coverS').disabled=false

</script>


{% endblock %}